2025-03-27 03:43:54,458 | amadeus_booking | INFO | 
===== BOOKING FLIGHT =====
2025-03-27 03:43:54,459 | amadeus_booking | INFO | Flight booking requested
2025-03-27 03:43:54,459 | amadeus_booking | ERROR | Missing traveler information: first_name, last_name
2025-03-27 03:44:02,072 | amadeus_booking | INFO | 
===== BOOKING FLIGHT =====
2025-03-27 03:44:02,073 | amadeus_booking | INFO | Flight booking requested
2025-03-27 03:44:02,073 | amadeus_booking | INFO | Getting Amadeus API access token
2025-03-27 03:44:02,776 | amadeus_booking | INFO | Got access token: 8ddyA9c6RW...
2025-03-27 03:44:02,777 | amadeus_booking | WARNING | No previous search data available to find original offer
2025-03-27 03:44:02,777 | amadeus_booking | INFO | Creating flight offer from provided details
2025-03-27 03:44:02,777 | amadeus_booking | INFO | Created flight offer with carrier: , flight: , from:  to: 
2025-03-27 03:44:02,778 | amadeus_booking | INFO | Booking payload: {
  "data": {
    "type": "flight-order",
    "flightOffers": [
      {
        "type": "flight-offer",
        "id": "1",
        "source": "GDS",
        "instantTicketingRequired": false,
        "nonHomogeneous": false,
        "lastTicketingDate": "2025-05-01",
        "itineraries": [
          {
            "segments": [
              {
                "departure": {
                  "iataCode": "",
                  "terminal": "",
                  "at": "2025-05-01T00:00:00"
                },
                "arrival": {
                  "iataCode": "",
                  "terminal": "",
                  "at": "2025-05-01T01:00:00"
                },
                "carrierCode": "",
                "number": "",
                "aircraft": {
                  "code": "320"
                },
                "operating": {
                  "carrierCode": ""
                },
                "duration": "PT2H",
                "id": "1",
                "numberOfStops": 0
              }
            ]
          }
        ],
        "price": {
          "currency": "EUR",
          "total": "0.00",
          "base": "0.00",
          "grandTotal": "0.00"
        },
        "pricingOptions": {
          "fareType": [
            "PUBLISHED"
          ],
          "includedCheckedBagsOnly": false
        },
        "validatingAirlineCodes": [
          ""
        ],
        "travelerPricings": [
          {
            "travelerId": "1",
            "fareOption": "STANDARD",
            "travelerType": "ADULT",
            "price": {
              "currency": "EUR",
              "total": "0.00",
              "base": "0.00"
            },
            "fareDetailsBySegment": [
              {
                "segmentId": "1",
                "cabin": "ECONOMY",
                "fareBasis": "YFFBR",
                "class": "Y",
                "includedCheckedBags": {
                  "quantity": 0
                }
              }
            ]
          }
        ]
      }
    ],
    "travelers": [
      {
        "id": "1",
        "dateOfBirth": "2000-01-01",
        "name": {
          "firstName": "ak",
          "lastName": "ak"
        },
        "gender": "MALE",
        "contact": {
          "emailAddress": "ak@ak.com",
          "phones": [
            {
              "deviceType": "MOBILE",
              "countryCallingCode": "1",
              "number": "99999999"
            }
          ]
        }
      }
    ],
    "ticketingAgreement": {
      "option": "DELAY_TO_CANCEL",
      "delay": "6D"
    }
  }
}
2025-03-27 03:44:02,778 | amadeus_booking | INFO | Sending booking request to https://test.api.amadeus.com/v1/booking/flight-orders
2025-03-27 03:44:04,023 | amadeus_booking | INFO | Booking API response: HTTP 400
2025-03-27 03:44:04,026 | amadeus_booking | INFO | Raw API response saved to api_responses/booking_20250327_034404.txt
2025-03-27 03:44:04,027 | amadeus_booking | ERROR | API errors: Booking failed: departure iataCode must be a 3-letter code (Code: 477, Path: /data/flightOffers[0]/itineraries[0]/segments[0]/departure/iataCode); carrier code is a 2 or 3 alphanum except 'YY' and 'YYY' (Code: 477, Path: /data/flightOffers[0]/itineraries[0]/segments[0]/operating/carrierCode); validatingAirlineCode is a 2 alphanum except 'YY' (Code: 477, Path: /data/flightOffers[0]/validatingAirlineCodes[0]); arrival iataCode must be a 3-letter code (Code: 477, Path: /data/flightOffers[0]/itineraries[0]/segments[0]/arrival/iataCode); carrier code is a 2 or 3 alphanum except 'YY' and 'YYY' (Code: 477, Path: /data/flightOffers[0]/itineraries[0]/segments[0]/carrierCode)
2025-03-27 03:44:18,336 | amadeus_booking | INFO | 
===== BOOKING FLIGHT =====
2025-03-27 03:44:18,337 | amadeus_booking | INFO | Flight booking requested
2025-03-27 03:44:18,337 | amadeus_booking | INFO | Getting Amadeus API access token
2025-03-27 03:44:19,125 | amadeus_booking | INFO | Got access token: PvMfcyJFTE...
2025-03-27 03:44:19,126 | amadeus_booking | WARNING | No previous search data available to find original offer
2025-03-27 03:44:19,126 | amadeus_booking | INFO | Flight offer already has itineraries - using as is with minor adjustments
2025-03-27 03:44:19,127 | amadeus_booking | INFO | Using pre-formatted flight offer with carrier code(s): ['AS']
2025-03-27 03:44:19,127 | amadeus_booking | INFO | Booking payload: {
  "data": {
    "type": "flight-order",
    "flightOffers": [
      {
        "id": "8",
        "origin": "IAD",
        "destination": "SFO",
        "departure_date": "2025-05-01",
        "itineraries": [
          {
            "segments": [
              {
                "departure": {
                  "iataCode": "IAD",
                  "at": "2025-05-01T17:00:00"
                },
                "arrival": {
                  "iataCode": "LAX",
                  "at": "2025-05-01T20:00:00"
                },
                "carrierCode": "AS",
                "flightNumber": "309",
                "duration": "PT6H",
                "aircraft": {
                  "code": "B737-900"
                },
                "operating": {
                  "carrierCode": "AS"
                }
              },
              {
                "departure": {
                  "iataCode": "LAX",
                  "at": "2025-05-01T22:30:00"
                },
                "arrival": {
                  "iataCode": "SFO",
                  "at": "2025-05-01T23:59:00"
                },
                "carrierCode": "AS",
                "flightNumber": "2276",
                "duration": "PT1H29M",
                "aircraft": {
                  "code": "EMB175"
                },
                "operating": {
                  "carrierCode": "AS"
                }
              }
            ]
          }
        ],
        "price": {
          "currency": "EUR",
          "base": "123.00",
          "total": "155.27",
          "grandTotal": "155.27"
        },
        "baggage": {
          "includedCheckedBags": 0
        },
        "cabin": "ECONOMY",
        "type": "flight-offer",
        "source": "GDS",
        "validatingAirlineCodes": [
          "AS"
        ],
        "travelerPricings": [
          {
            "travelerId": "1",
            "fareOption": "STANDARD",
            "travelerType": "ADULT",
            "price": {
              "currency": "EUR",
              "total": "155.27",
              "base": "123.00"
            },
            "fareDetailsBySegment": [
              {
                "segmentId": "1",
                "cabin": "ECONOMY",
                "fareBasis": "YFFBR",
                "class": "Y",
                "includedCheckedBags": {
                  "quantity": 0
                }
              },
              {
                "segmentId": "2",
                "cabin": "ECONOMY",
                "fareBasis": "YFFBR",
                "class": "Y",
                "includedCheckedBags": {
                  "quantity": 0
                }
              }
            ]
          }
        ],
        "pricingOptions": {
          "fareType": [
            "PUBLISHED"
          ],
          "includedCheckedBagsOnly": false
        }
      }
    ],
    "travelers": [
      {
        "id": "1",
        "dateOfBirth": "2000-01-01",
        "name": {
          "firstName": "ak",
          "lastName": "ak"
        },
        "gender": "MALE",
        "contact": {
          "emailAddress": "ak@ak.com",
          "phones": [
            {
              "deviceType": "MOBILE",
              "countryCallingCode": "1",
              "number": "99999999"
            }
          ]
        }
      }
    ],
    "ticketingAgreement": {
      "option": "DELAY_TO_CANCEL",
      "delay": "6D"
    }
  }
}
2025-03-27 03:44:19,128 | amadeus_booking | INFO | Sending booking request to https://test.api.amadeus.com/v1/booking/flight-orders
2025-03-27 03:44:20,261 | amadeus_booking | INFO | Booking API response: HTTP 400
2025-03-27 03:44:20,265 | amadeus_booking | INFO | Raw API response saved to api_responses/booking_20250327_034420.txt
2025-03-27 03:44:20,265 | amadeus_booking | ERROR | API errors: Booking failed: segmentId not existing (Code: 4926, Path: /data/flightOffers[0]/travelerPricings[0]/fareDetailsBySegment[1]/segmentId); number needed (Code: 32171, Path: /data/flightOffers[0]/itineraries[0]/segments[1]/number); id needed (Code: 32171, Path: /data/flightOffers[0]/itineraries[0]/segments[0]/id); number needed (Code: 32171, Path: /data/flightOffers[0]/itineraries[0]/segments[0]/number); id needed (Code: 32171, Path: /data/flightOffers[0]/itineraries[0]/segments[1]/id)
2025-03-27 03:44:29,925 | amadeus_booking | INFO | 
===== BOOKING FLIGHT =====
2025-03-27 03:44:29,926 | amadeus_booking | INFO | Flight booking requested
2025-03-27 03:44:29,926 | amadeus_booking | INFO | Getting Amadeus API access token
2025-03-27 03:44:30,772 | amadeus_booking | INFO | Got access token: axZZXznpFm...
2025-03-27 03:44:30,773 | amadeus_booking | WARNING | No previous search data available to find original offer
2025-03-27 03:44:30,773 | amadeus_booking | INFO | Flight offer already has itineraries - using as is with minor adjustments
2025-03-27 03:44:30,773 | amadeus_booking | INFO | Using pre-formatted flight offer with carrier code(s): ['AS']
2025-03-27 03:44:30,774 | amadeus_booking | INFO | Booking payload: {
  "data": {
    "type": "flight-order",
    "flightOffers": [
      {
        "id": "8",
        "origin": "IAD",
        "destination": "SFO",
        "departure_date": "2025-05-01",
        "itineraries": [
          {
            "segments": [
              {
                "id": "1",
                "number": "1",
                "departure": {
                  "iataCode": "IAD",
                  "at": "2025-05-01T17:00:00"
                },
                "arrival": {
                  "iataCode": "LAX",
                  "at": "2025-05-01T20:00:00"
                },
                "carrierCode": "AS",
                "flightNumber": "309",
                "duration": "PT6H",
                "aircraft": {
                  "code": "B737"
                },
                "operating": {
                  "carrierCode": "AS"
                }
              },
              {
                "id": "2",
                "number": "2",
                "departure": {
                  "iataCode": "LAX",
                  "at": "2025-05-01T22:30:00"
                },
                "arrival": {
                  "iataCode": "SFO",
                  "at": "2025-05-01T23:59:00"
                },
                "carrierCode": "AS",
                "flightNumber": "2276",
                "duration": "PT1H29M",
                "aircraft": {
                  "code": "E175"
                },
                "operating": {
                  "carrierCode": "AS"
                }
              }
            ]
          }
        ],
        "price": {
          "currency": "EUR",
          "base": "123.00",
          "total": "155.27",
          "grandTotal": "155.27"
        },
        "baggage": {
          "includedCheckedBags": 0
        },
        "cabin": "ECONOMY",
        "type": "flight-offer",
        "source": "GDS",
        "validatingAirlineCodes": [
          "AS"
        ],
        "travelerPricings": [
          {
            "travelerId": "1",
            "fareOption": "STANDARD",
            "travelerType": "ADULT",
            "price": {
              "currency": "EUR",
              "total": "155.27",
              "base": "123.00"
            },
            "fareDetailsBySegment": [
              {
                "segmentId": "1",
                "cabin": "ECONOMY",
                "fareBasis": "YFFBR",
                "class": "Y",
                "includedCheckedBags": {
                  "quantity": 0
                }
              },
              {
                "segmentId": "2",
                "cabin": "ECONOMY",
                "fareBasis": "YFFBR",
                "class": "Y",
                "includedCheckedBags": {
                  "quantity": 0
                }
              }
            ]
          }
        ],
        "pricingOptions": {
          "fareType": [
            "PUBLISHED"
          ],
          "includedCheckedBagsOnly": false
        }
      }
    ],
    "travelers": [
      {
        "id": "1",
        "dateOfBirth": "2000-01-01",
        "name": {
          "firstName": "ak",
          "lastName": "ak"
        },
        "gender": "MALE",
        "contact": {
          "emailAddress": "ak@ak.com",
          "phones": [
            {
              "deviceType": "MOBILE",
              "countryCallingCode": "1",
              "number": "99999999"
            }
          ]
        }
      }
    ],
    "ticketingAgreement": {
      "option": "DELAY_TO_CANCEL",
      "delay": "6D"
    }
  }
}
2025-03-27 03:44:30,774 | amadeus_booking | INFO | Sending booking request to https://test.api.amadeus.com/v1/booking/flight-orders
2025-03-27 03:44:32,841 | amadeus_booking | INFO | Booking API response: HTTP 400
2025-03-27 03:44:32,843 | amadeus_booking | INFO | Raw API response saved to api_responses/booking_20250327_034432.txt
2025-03-27 03:44:32,844 | amadeus_booking | ERROR | API errors: Booking failed: Could not sell segment 1 (Code: 34651, Path: /data/flightOffers[0]/itineraries[0]/segments[0])
2025-03-27 03:50:39,700 | amadeus_booking | INFO | 
===== BOOKING FLIGHT =====
2025-03-27 03:50:39,703 | amadeus_booking | INFO | Flight booking requested
2025-03-27 03:50:39,704 | amadeus_booking | INFO | Getting Amadeus API access token
2025-03-27 03:50:40,820 | amadeus_booking | INFO | Got access token: lrwozpPfgB...
2025-03-27 03:50:40,820 | amadeus_booking | WARNING | No previous search data available to find original offer
2025-03-27 03:50:40,820 | amadeus_booking | INFO | Flight offer already has itineraries - using as is with minor adjustments
2025-03-27 03:50:40,821 | amadeus_booking | INFO | Using pre-formatted flight offer with carrier code(s): ['AS']
2025-03-27 03:50:40,821 | amadeus_booking | INFO | Booking payload: {
  "data": {
    "type": "flight-order",
    "flightOffers": [
      {
        "id": "3",
        "origin": "IAD",
        "destination": "SFO",
        "departure_date": "2025-05-01",
        "itineraries": [
          {
            "segments": [
              {
                "id": "1",
                "number": "1",
                "departure": {
                  "iataCode": "IAD",
                  "at": "2025-05-01T19:55:00"
                },
                "arrival": {
                  "iataCode": "SFO",
                  "at": "2025-05-01T23:10:00"
                },
                "carrierCode": "AS",
                "flightNumber": "435",
                "duration": "PT6H15M",
                "aircraft": {
                  "code": "B737"
                },
                "operating": {
                  "carrierCode": "AS"
                }
              }
            ]
          }
        ],
        "price": {
          "currency": "EUR",
          "base": "123.00",
          "total": "146.33",
          "grandTotal": "146.33"
        },
        "baggage": {
          "includedCheckedBags": 0
        },
        "cabin": "ECONOMY",
        "type": "flight-offer",
        "source": "GDS",
        "validatingAirlineCodes": [
          "AS"
        ],
        "travelerPricings": [
          {
            "travelerId": "1",
            "fareOption": "STANDARD",
            "travelerType": "ADULT",
            "price": {
              "currency": "EUR",
              "total": "146.33",
              "base": "123.00"
            },
            "fareDetailsBySegment": [
              {
                "segmentId": "1",
                "cabin": "ECONOMY",
                "fareBasis": "YFFBR",
                "class": "Y",
                "includedCheckedBags": {
                  "quantity": 0
                }
              }
            ]
          }
        ],
        "pricingOptions": {
          "fareType": [
            "PUBLISHED"
          ],
          "includedCheckedBagsOnly": false
        }
      }
    ],
    "travelers": [
      {
        "id": "1",
        "dateOfBirth": "2000-01-01",
        "name": {
          "firstName": "ak",
          "lastName": "ak"
        },
        "gender": "MALE",
        "contact": {
          "emailAddress": "ak@ak.com",
          "phones": [
            {
              "deviceType": "MOBILE",
              "countryCallingCode": "1",
              "number": "99999999"
            }
          ]
        }
      }
    ],
    "ticketingAgreement": {
      "option": "DELAY_TO_CANCEL",
      "delay": "6D"
    }
  }
}
2025-03-27 03:50:40,821 | amadeus_booking | INFO | Sending booking request to https://test.api.amadeus.com/v1/booking/flight-orders
2025-03-27 03:50:42,737 | amadeus_booking | INFO | Booking API response: HTTP 400
2025-03-27 03:50:42,740 | amadeus_booking | INFO | Raw API response saved to api_responses/booking_20250327_035042.txt
2025-03-27 03:50:42,740 | amadeus_booking | ERROR | API errors: Booking failed: Could not sell segment 1 (Code: 34651, Path: /data/flightOffers[0]/itineraries[0]/segments[0])
2025-03-27 03:53:50,150 | amadeus_booking | INFO | 
===== BOOKING FLIGHT =====
2025-03-27 03:53:50,151 | amadeus_booking | INFO | Flight booking requested
2025-03-27 03:53:50,151 | amadeus_booking | INFO | Getting Amadeus API access token
2025-03-27 03:53:51,120 | amadeus_booking | INFO | Got access token: WUSeTaxdle...
2025-03-27 03:53:51,121 | amadeus_booking | WARNING | No previous search data available to find original offer
2025-03-27 03:53:51,122 | amadeus_booking | INFO | Flight offer already has itineraries - using as is with minor adjustments
2025-03-27 03:53:51,122 | amadeus_booking | INFO | Using pre-formatted flight offer with carrier code(s): ['AS']
2025-03-27 03:53:51,123 | amadeus_booking | INFO | Booking payload: {
  "data": {
    "type": "flight-order",
    "flightOffers": [
      {
        "id": "9",
        "origin": "DCA",
        "destination": "SFO",
        "departure_date": "2025-05-01",
        "itineraries": [
          {
            "segments": [
              {
                "id": "1",
                "number": "1",
                "departure": {
                  "iataCode": "DCA",
                  "at": "2025-05-01T17:30:00"
                },
                "arrival": {
                  "iataCode": "SEA",
                  "at": "2025-05-01T20:15:00"
                },
                "carrierCode": "AS",
                "flightNumber": "3",
                "duration": "PT5H45M",
                "aircraft": {
                  "code": "B737"
                },
                "operating": {
                  "carrierCode": "AS"
                }
              },
              {
                "id": "2",
                "number": "2",
                "departure": {
                  "iataCode": "SEA",
                  "at": "2025-05-01T20:55:00"
                },
                "arrival": {
                  "iataCode": "SFO",
                  "at": "2025-05-01T23:13:00"
                },
                "carrierCode": "AS",
                "flightNumber": "1112",
                "duration": "PT2H18M",
                "aircraft": {
                  "code": "B737"
                },
                "operating": {
                  "carrierCode": "AS"
                }
              }
            ]
          }
        ],
        "price": {
          "currency": "EUR",
          "base": "123.00",
          "total": "155.27",
          "grandTotal": "155.27"
        },
        "baggage": {
          "includedCheckedBags": 0
        },
        "cabin": "ECONOMY",
        "type": "flight-offer",
        "source": "GDS",
        "validatingAirlineCodes": [
          "AS"
        ],
        "travelerPricings": [
          {
            "travelerId": "1",
            "fareOption": "STANDARD",
            "travelerType": "ADULT",
            "price": {
              "currency": "EUR",
              "total": "155.27",
              "base": "123.00"
            },
            "fareDetailsBySegment": [
              {
                "segmentId": "1",
                "cabin": "ECONOMY",
                "fareBasis": "YFFBR",
                "class": "Y",
                "includedCheckedBags": {
                  "quantity": 0
                }
              },
              {
                "segmentId": "2",
                "cabin": "ECONOMY",
                "fareBasis": "YFFBR",
                "class": "Y",
                "includedCheckedBags": {
                  "quantity": 0
                }
              }
            ]
          }
        ],
        "pricingOptions": {
          "fareType": [
            "PUBLISHED"
          ],
          "includedCheckedBagsOnly": false
        }
      }
    ],
    "travelers": [
      {
        "id": "1",
        "dateOfBirth": "2000-01-01",
        "name": {
          "firstName": "ak",
          "lastName": "ak"
        },
        "gender": "MALE",
        "contact": {
          "emailAddress": "ak@ak.com",
          "phones": [
            {
              "deviceType": "MOBILE",
              "countryCallingCode": "1",
              "number": "99999999"
            }
          ]
        }
      }
    ],
    "ticketingAgreement": {
      "option": "DELAY_TO_CANCEL",
      "delay": "6D"
    }
  }
}
2025-03-27 03:53:51,124 | amadeus_booking | INFO | Sending booking request to https://test.api.amadeus.com/v1/booking/flight-orders
2025-03-27 03:53:53,297 | amadeus_booking | INFO | Booking API response: HTTP 400
2025-03-27 03:53:53,305 | amadeus_booking | INFO | Raw API response saved to api_responses/booking_20250327_035353.txt
2025-03-27 03:53:53,307 | amadeus_booking | ERROR | API errors: Booking failed: Could not sell segment 2 (Code: 34651, Path: /data/flightOffers[0]/itineraries[0]/segments[1])
